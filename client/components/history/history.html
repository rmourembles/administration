<div class="main">
    <div class="show-for-large-up large-2 columns">

    </div>
    <div class="small-12 large-10 columns">

        

        <div class="history tableContainer" 
             ng-controller="HistoryController"
             infinite-scroll="loadMore()" 
             infinite-scroll-disabled='busy'
             infinite-scroll-distance="1">

            
            <div>
                <div class="small-12 large-4 columns">
                    <div class="row">
                        <div class="small-3 columns">
                            <label for="right-label" class="right">Collection</label>
                        </div>
                        <div class="small-9 columns">
                            <select class="form-control"
                                    ng-model="selectedCollection" 
                                    ng-options="_collection for _collection in collections" 
                                    ng-change="setParam('collection', selectedCollection)"></select>
                        </div>
                    </div>
                </div>
                <div class="small-12 large-4 columns">
                    <div class="row">
                        <div class="small-3 columns">
                            <label for="right-label" class="right">Service</label>
                        </div>
                        <div class="small-9 columns">
                            <select class="form-control" 
                                    ng-model="selectedService" 
                                    ng-options="_service for _service in services" 
                                    ng-change="setParam('service', selectedService)"></select>
                        </div>
                    </div>
                </div>
                <div class="small-12 large-4 columns">
                    <div class="row">
                        <div class="small-3 columns">
                            <label for="right-label" class="right">Method</label>
                        </div>
                        <div class="small-9 columns">
                            <select class="form-control"
                                    ng-model="selectedMethod" 
                                    ng-options="_method for _method in methods" 
                                    ng-change="setParam('method', selectedMethod)"></select>
                        </div>
                    </div>
                </div>
                
            </div>
            <div>
                <a href="" class="button" ng-click="resetFilters()" style="margin-top: 15px;">{{'reset filters' | translate }}</a>
            </div>
                
            
            
            <div ng-show='busy'>{{'loading_data'| translate}}</div>

            <table>
                <thead>
                    <tr>
                        <th class="show-for-medium-up clickable" ng-click="setHistory('userid')" >{{'userid'| translate}}  <i class="fi-arrow-up" ng-show="orderBy === 'userid'" ng-class="{true:'fi-arrow-up', false:'fi-arrow-down'}[ascOrDesc === 'DESC']"></i></th>
                        <th class="show-for-medium-up clickable" ng-click="setHistory('method')" >{{'method'| translate}}  <i class="fi-arrow-up" ng-show="orderBy === 'method'" ng-class="{true:'fi-arrow-up', false:'fi-arrow-down'}[ascOrDesc === 'DESC']"></th>
                        <th class="clickable" ng-click="setHistory('service')" >{{'service'| translate}}  <i class="fi-arrow-up" ng-show="orderBy === 'service'" ng-class="{true:'fi-arrow-up', false:'fi-arrow-down'}[ascOrDesc === 'DESC']"></th>
                        <th class="clickable" ng-click="setHistory('collection')" >{{'collection'| translate}}  <i class="fi-arrow-up" ng-show="orderBy === 'collection'" ng-class="{true:'fi-arrow-up', false:'fi-arrow-down'}[ascOrDesc === 'DESC']"></th>
                        <th class="show-for-medium-up clickable" ng-click="setHistory('resourceid')" >{{'resourceid'| translate}}  <i class="fi-arrow-up" ng-show="orderBy === 'resourceid'" ng-class="{true:'fi-arrow-up', false:'fi-arrow-down'}[ascOrDesc === 'DESC']"></th>
                        <th class="show-for-medium-up clickable" ng-click="setHistory('query')" >{{'query'| translate}}  <i class="fi-arrow-up" ng-show="orderBy === 'query'" ng-class="{true:'fi-arrow-up', false:'fi-arrow-down'}[ascOrDesc === 'DESC']"></th>
                        <th class="show-for-medium-up clickable" ng-click="setHistory('querytime')" >{{'querytime'| translate}}  <i class="fi-arrow-up" ng-show="orderBy === 'querytime'" ng-class="{true:'fi-arrow-up', false:'fi-arrow-down'}[ascOrDesc === 'DESC']"></th>
                        <th class="show-for-medium-up" >ip</th>
                    </tr>
                </thead>
                <tbody ng-show="showHistory">
                    <tr ng-repeat="x in history">
                        <td class="show-for-medium-up">{{ x.userid}}</td>
                        <td class="show-for-medium-up">{{ x.method}}</td>
                        <td>{{ x.service}}</td>
                        <td>{{ x.collection}}</td>
                        <td class="show-for-medium-up">{{ x.resourceid}}</td>
                        <td class="show-for-medium-up">{{ x.query}}</td>
                        <td class="show-for-medium-up">{{ x.querytime}}</td>
                        <td class="show-for-medium-up">{{ x.ip}}</td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>
</div>



